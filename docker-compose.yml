version: '3.8'

services:
  arangodb:
    image: arangodb:latest
    container_name: bus-management-arangodb
    environment:
      ARANGO_ROOT_PASSWORD: admin123
    ports:
      - "8529:8529"
    volumes:
      - arangodb_data:/var/lib/arangodb3
      - arangodb_apps:/var/lib/arangodb3-apps
    restart: unless-stopped
    networks:
      - bus-network

  redis-be:
    image: redis:7-alpine
    container_name: bus_redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes
    restart: unless-stopped

  # Optional: Backend service
  # backend:
  #   build: ./backend
  #   container_name: bus-management-backend
  #   environment:
  #     ARANGO_HOST: http://arangodb:8529
  #     ARANGO_USERNAME: root
  #     ARANGO_PASSWORD: admin123
  #     ARANGO_DATABASE: bus_management_hcm
  #   ports:
  #     - "5000:5000"
  #   depends_on:
  #     - arangodb
  #   volumes:
  #     - ./backend:/app
  #   networks:
  #     - bus-network
  #   command: python run.py

volumes:
  arangodb_data:
  arangodb_apps:
  redis_data:



networks:
  bus-network:
    driver: bridge
